---
title: 网络
---
<Note>
对于大多数Web开发、API调用、微服务通信，使用Http层协议工具（特别是requests库）完全足够且是正确选。只有需要低级别的网络服务（涉及到TCP/IP等）才推荐使用 Socket协议工具
</Note>

## HTTP 请求
https://httpbin.org 是一个HTTP 请求测试和调试服务，你发送什么请求给它，它就返回什么相关信息给你，非常方便用于学习和调试。


### 简单发请求
```py
import requests

# 最简单的GET请求
response = requests.get('https://httpbin.org/get?name=John&age=30')
print(response.status_code)  # 200
print(response.text)         # 响应内容


# POST发送表单数据（application/x-www-form-urlencoded）
data = {'username': 'admin', 'password': 'secret'}
response = requests.post('https://httpbin.org/post', data=data)
print(response.text)

# POST发送JSON数据（application/json）
json_data = {'name': 'John', 'age': 30}
response = requests.post('https://httpbin.org/post', json=json_data)
print(response.text)
```


### 响应处理
```py
response = requests.get('https://api.github.com')

# 状态码
print(response.status_code)
print(response.ok)  # 状态码为200-400时返回True

# 响应内容
print(response.text)      # 字符串内容
print(response.content)   # 字节内容
print(response.json())    # JSON内容（如果是JSON）

# 响应头
print(response.headers)
print(response.headers['Content-Type'])

# 编码处理
response.encoding = 'utf-8'  # 设置编码
print(response.encoding)

# 获取原始响应（用于流式传输）
raw_response = response.raw
```


### 请求配置
#### 请求头
```py
headers = {
    'User-Agent': 'Mozilla/5.0',
    'Authorization': 'Bearer token123',
    'Content-Type': 'application/json',
    'X-Custom-Header': 'value'
}

response = requests.get('https://httpbin.org/headers', headers=headers)
```

#### 超时设置
```py
# 连接+读取总超时
response = requests.get('https://httpbin.org/delay/5', timeout=3)

# 分别设置连接和读取超时
response = requests.get('https://httpbin.org/delay/2', timeout=(1, 3))
```


#### 会话
```py
# 创建会话（保持cookies、连接等）
session = requests.Session()

# 登录
session.post('https://example.com/login', 
             data={'username': 'user', 'password': 'pass'})

# 后续请求自动携带cookies
response = session.get('https://example.com/dashboard')

# 设置会话级别的参数
session.headers.update({'User-Agent': 'MyApp/1.0'})
session.auth = ('username', 'password')
session.proxies.update({'http': 'proxy.example.com:8080'})
```