---
title: å®‰è£…
---


## æ‹‰å–é•œåƒ
```sh
podman pull docker.io/rustdesk/rustdesk-server
```


## è„šæœ¬ç®¡ç†

ç»™è„šæœ¬æ‰§è¡Œæƒé™ `chmod +x /home/rustdesk-server/rustdesk-start.sh`
```sh
#!/bin/bash
echo "========================================"
echo "     RustDesk æœåŠ¡å™¨ä¸€é”®å¯åŠ¨è„šæœ¬"
echo "========================================"
echo ""

# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
echo "ğŸ”„ æ£€æŸ¥/æ‹‰å–æœ€æ–°é•œåƒ..."
podman pull docker.io/rustdesk/rustdesk-server:latest 2>/dev/null || echo "ä½¿ç”¨æœ¬åœ°é•œåƒ"

# æ¸…ç†å¯èƒ½å­˜åœ¨çš„æ—§å®¹å™¨
echo "ğŸ§¹ æ¸…ç†æ—§å®¹å™¨..."
podman rm -f hbbs hbbr 2>/dev/null || true

# å¯åŠ¨ hbbs
echo "ğŸš€ å¯åŠ¨ hbbs (IDæœåŠ¡å™¨)..."
podman run -d \
  --name hbbs \
  --network=host \
  -v /home/rustdesk-server/data:/root \
  -e RELAY_SERVER=66.112.211.55:21117 \
  --restart unless-stopped \
  docker.io/rustdesk/rustdesk-server:latest \
  hbbs -r 66.112.211.55:21117

# å¯åŠ¨ hbbr
echo "ğŸš€ å¯åŠ¨ hbbr (ä¸­ç»§æœåŠ¡å™¨)..."
podman run -d \
  --name hbbr \
  --network=host \
  -v /home/rustdesk-server/data:/root \
  --restart unless-stopped \
  docker.io/rustdesk/rustdesk-server:latest \
  hbbr

echo ""
echo "âœ… å¯åŠ¨å®Œæˆï¼"
echo "========================================"
```

ç»™è„šæœ¬æ‰§è¡Œæƒé™  `chmod +x /home/rustdesk-server/rustdesk-manage.sh`
```sh
#!/bin/bash
cd /home/rustdesk-server

case "$1" in
    start)
        echo "å¯åŠ¨ RustDesk æœåŠ¡..."
        podman start hbbs hbbr
        ;;
    stop)
        echo "åœæ­¢ RustDesk æœåŠ¡..."
        podman stop hbbs hbbr
        ;;
    restart)
        echo "é‡å¯ RustDesk æœåŠ¡..."
        podman restart hbbs hbbr
        ;;
    status)
        echo "å®¹å™¨çŠ¶æ€ï¼š"
        podman ps -a --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" | grep -E "(hbbs|hbbr|CONTAINER)"
        ;;
    logs)
        echo "hbbs æ—¥å¿—ï¼š"
        podman logs hbbs --tail 20
        echo ""
        echo "hbbr æ—¥å¿—ï¼š"
        podman logs hbbr --tail 20
        ;;
    update)
        echo "æ›´æ–°é•œåƒ..."
        podman pull docker.io/rustdesk/rustdesk-server:latest
        ./rustdesk-manage.sh restart
        ;;
    key)
        echo "å…¬é’¥ (å¤åˆ¶åˆ°å®¢æˆ·ç«¯)ï¼š"
        cat data/id_ed25519.pub 2>/dev/null || echo "å…¬é’¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·å…ˆå¯åŠ¨æœåŠ¡"
        ;;
    ports)
        echo "æ£€æŸ¥ç«¯å£ç›‘å¬ï¼š"
        sudo ss -tulpn | grep 2111
        ;;
    clean)
        echo "æ¸…ç†æ‰€æœ‰å®¹å™¨..."
        podman rm -f hbbs hbbr
        podman system prune -f
        ;;
    *)
        echo "ä½¿ç”¨æ–¹æ³•: $0 {start|stop|restart|status|logs|update|key|ports|clean}"
        echo ""
        echo "   start    å¯åŠ¨æœåŠ¡"
        echo "   stop     åœæ­¢æœåŠ¡"
        echo "   restart  é‡å¯æœåŠ¡"
        echo "   status   æŸ¥çœ‹çŠ¶æ€"
        echo "   logs     æŸ¥çœ‹æ—¥å¿—"
        echo "   update   æ›´æ–°é•œåƒ"
        echo "   key      æŸ¥çœ‹å…¬é’¥"
        echo "   ports    æ£€æŸ¥ç«¯å£"
        echo "   clean    æ¸…ç†å®¹å™¨"
        ;;
esac
```

ä½¿ç”¨è„šæœ¬
```sh
# å¯åŠ¨æœåŠ¡
./rustdesk-start.sh

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
./rustdesk-manage.sh status

# æ£€æŸ¥ç«¯å£
./rustdesk-manage.sh ports

# è·å–å…¬é’¥ï¼ˆé‡è¦ï¼å®¢æˆ·ç«¯éœ€è¦ï¼‰
./rustdesk-manage.sh key

# æŸ¥çœ‹æ—¥å¿—
./rustdesk-manage.sh logs
```


{/* 
ä½¿ç”¨Podman Compose   
ä¸ºäº†æ›´æ–¹ä¾¿çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨Podman Composeæ¥ç®¡ç†å®¹å™¨ã€‚

* Podman ç‰ˆçš„ Docker Compose
* è®©ä½ èƒ½ä½¿ç”¨ docker-compose.yml æ–‡ä»¶ç®¡ç†å¤šä¸ªå®¹å™¨
* æ”¯æŒ docker-compose å‘½ä»¤


```sh
# å®‰è£…podman-compose
apt install -y podman-compose
```


ä¸º RustDesk åˆ›å»ºä¸“ç”¨ç›®å½•
```sh
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /home/rustdesk-server
cd /home/rustdesk-server

# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data
```


æ¯ä¸ªé¡¹ç›®/åº”ç”¨æœ‰è‡ªå·±çš„ docker-compose.yml
æ–‡ä»¶åªç®¡ç†å®ƒæ‰€åœ¨ç›®å½•ä¸‹çš„ç›¸å…³å®¹å™¨
ä¸åŒé¡¹ç›®çš„ Compose æ–‡ä»¶äº’ä¸å½±å“
```sh
# /home/rustdesk-server/docker-compose.yml
version: '3'
services:
  hbbs:
    container_name: hbbs
    image: docker.io/rustdesk/rustdesk-server:latest
    command: hbbs -r YOUR_SERVER_IP:21117
    volumes:
      - /home/rustdesk-server/data:/root
    network_mode: "host"
    restart: unless-stopped
    environment:
      - RELAY_SERVER=YOUR_SERVER_IP:21117
  
  hbbr:
    container_name: hbbr
    image: docker.io/rustdesk/rustdesk-server:latest
    command: hbbr
    volumes:
      - /home/rustdesk-server/data:/root
    network_mode: "host"
    restart: unless-stopped
```

å¯¹ Podman/Docker æ¥è¯´ï¼Œhbbs å’Œ hbbr æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼ˆæœåŠ¡äºåŒä¸€ä¸ªåº”ç”¨ï¼‰ã€‚


æœ€åä½¿ç”¨ podman-compose å¯åŠ¨,
podman-compose ä¼šæŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„ docker-compose.yml æ–‡ä»¶ï¼Œå› æ­¤å‘½ä»¤è¦åœ¨è¦åœ¨`/home/rustdesk-server` ç›®å½•ä¸‹æ‰§è¡Œ
```sh
podman-compose up -d # å¯åŠ¨

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
podman ps
# æˆ–
sudo podman ps

# æŸ¥çœ‹ hbbs æ—¥å¿—
podman logs hbbs

# æŸ¥çœ‹ç”Ÿæˆçš„å¯†é’¥ï¼ˆåœ¨ data ç›®å½•ä¸­ï¼‰
ls -la data/
cat data/id_ed25519.pub  # è¿™æ˜¯ä½ çš„å…¬é’¥ï¼Œå®¢æˆ·ç«¯éœ€è¦
```
 */}

